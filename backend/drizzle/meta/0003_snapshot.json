{
  "id": "a660952b-ad19-4461-82e8-64ba3e499faa",
  "prevId": "e39ec309-ed33-434e-bfc4-18708264f29d",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.assessment_logs": {
      "name": "assessment_logs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigserial",
          "primaryKey": true,
          "notNull": true
        },
        "symbol": {
          "name": "symbol",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "request_payload": {
          "name": "request_payload",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "context_payload": {
          "name": "context_payload",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "assessment_payload": {
          "name": "assessment_payload",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "raw_text": {
          "name": "raw_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "prompt_text": {
          "name": "prompt_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "system_prompt": {
          "name": "system_prompt",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_assessment_logs_symbol_created_at": {
          "name": "idx_assessment_logs_symbol_created_at",
          "columns": [
            {
              "expression": "symbol",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "\"created_at\" desc",
              "asc": true,
              "isExpression": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.auto_portfolio_settings": {
      "name": "auto_portfolio_settings",
      "schema": "",
      "columns": {
        "portfolio_id": {
          "name": "portfolio_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "max_leverage": {
          "name": "max_leverage",
          "type": "numeric(6, 3)",
          "primaryKey": false,
          "notNull": false,
          "default": 10
        },
        "max_position_pct": {
          "name": "max_position_pct",
          "type": "numeric(6, 3)",
          "primaryKey": false,
          "notNull": false,
          "default": 50
        },
        "max_daily_loss": {
          "name": "max_daily_loss",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "max_drawdown_pct": {
          "name": "max_drawdown_pct",
          "type": "numeric(6, 3)",
          "primaryKey": false,
          "notNull": false
        },
        "cooldown_minutes": {
          "name": "cooldown_minutes",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 15
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "auto_portfolio_settings_portfolio_id_auto_portfolios_id_fk": {
          "name": "auto_portfolio_settings_portfolio_id_auto_portfolios_id_fk",
          "tableFrom": "auto_portfolio_settings",
          "tableTo": "auto_portfolios",
          "columnsFrom": [
            "portfolio_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.auto_portfolios": {
      "name": "auto_portfolios",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "auto_portfolio_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "automation_enabled": {
          "name": "automation_enabled",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "starting_capital": {
          "name": "starting_capital",
          "type": "numeric(18, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "current_cash": {
          "name": "current_cash",
          "type": "numeric(18, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "sharpe": {
          "name": "sharpe",
          "type": "numeric(10, 4)",
          "primaryKey": false,
          "notNull": false
        },
        "drawdown_pct": {
          "name": "drawdown_pct",
          "type": "numeric(6, 3)",
          "primaryKey": false,
          "notNull": false
        },
        "last_run_at": {
          "name": "last_run_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_auto_portfolios_user": {
          "name": "idx_auto_portfolios_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_auto_portfolios_status": {
          "name": "idx_auto_portfolios_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "auto_portfolios_user_id_users_id_fk": {
          "name": "auto_portfolios_user_id_users_id_fk",
          "tableFrom": "auto_portfolios",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.autotrade_events": {
      "name": "autotrade_events",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "portfolio_id": {
          "name": "portfolio_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "event_type": {
          "name": "event_type",
          "type": "autotrade_event_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "payload": {
          "name": "payload",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_autotrade_events_portfolio": {
          "name": "idx_autotrade_events_portfolio",
          "columns": [
            {
              "expression": "portfolio_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "\"created_at\" desc",
              "asc": true,
              "isExpression": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "autotrade_events_portfolio_id_auto_portfolios_id_fk": {
          "name": "autotrade_events_portfolio_id_auto_portfolios_id_fk",
          "tableFrom": "autotrade_events",
          "tableTo": "auto_portfolios",
          "columnsFrom": [
            "portfolio_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.llm_decision_logs": {
      "name": "llm_decision_logs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "portfolio_id": {
          "name": "portfolio_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "run_id": {
          "name": "run_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "symbol": {
          "name": "symbol",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "action": {
          "name": "action",
          "type": "autotrade_decision_action",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "size_pct": {
          "name": "size_pct",
          "type": "numeric(6, 3)",
          "primaryKey": false,
          "notNull": false
        },
        "confidence": {
          "name": "confidence",
          "type": "numeric(6, 3)",
          "primaryKey": false,
          "notNull": false
        },
        "rationale": {
          "name": "rationale",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "prompt_ref": {
          "name": "prompt_ref",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "cot_ref": {
          "name": "cot_ref",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_llm_decision_logs_portfolio": {
          "name": "idx_llm_decision_logs_portfolio",
          "columns": [
            {
              "expression": "portfolio_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "\"created_at\" desc",
              "asc": true,
              "isExpression": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_llm_decision_logs_run": {
          "name": "idx_llm_decision_logs_run",
          "columns": [
            {
              "expression": "run_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "llm_decision_logs_portfolio_id_auto_portfolios_id_fk": {
          "name": "llm_decision_logs_portfolio_id_auto_portfolios_id_fk",
          "tableFrom": "llm_decision_logs",
          "tableTo": "auto_portfolios",
          "columnsFrom": [
            "portfolio_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "llm_decision_logs_prompt_ref_llm_prompt_payloads_id_fk": {
          "name": "llm_decision_logs_prompt_ref_llm_prompt_payloads_id_fk",
          "tableFrom": "llm_decision_logs",
          "tableTo": "llm_prompt_payloads",
          "columnsFrom": [
            "prompt_ref"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "llm_decision_logs_cot_ref_llm_prompt_payloads_id_fk": {
          "name": "llm_decision_logs_cot_ref_llm_prompt_payloads_id_fk",
          "tableFrom": "llm_decision_logs",
          "tableTo": "llm_prompt_payloads",
          "columnsFrom": [
            "cot_ref"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.llm_prompt_payloads": {
      "name": "llm_prompt_payloads",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "storage_uri": {
          "name": "storage_uri",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "sha256": {
          "name": "sha256",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "payload_type": {
          "name": "payload_type",
          "type": "autotrade_prompt_payload_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_llm_prompt_payloads_sha": {
          "name": "idx_llm_prompt_payloads_sha",
          "columns": [
            {
              "expression": "sha256",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.persona_memories": {
      "name": "persona_memories",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "persona": {
          "name": "persona",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "symbol": {
          "name": "symbol",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "situation": {
          "name": "situation",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "recommendation": {
          "name": "recommendation",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "embedding": {
          "name": "embedding",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "trade_date": {
          "name": "trade_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_persona_memories_persona_symbol": {
          "name": "idx_persona_memories_persona_symbol",
          "columns": [
            {
              "expression": "persona",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "symbol",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_persona_memories_created_at": {
          "name": "idx_persona_memories_created_at",
          "columns": [
            {
              "expression": "\"created_at\" desc",
              "asc": true,
              "isExpression": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.portfolio_positions": {
      "name": "portfolio_positions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "portfolio_id": {
          "name": "portfolio_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "symbol": {
          "name": "symbol",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "quantity": {
          "name": "quantity",
          "type": "numeric(28, 12)",
          "primaryKey": false,
          "notNull": true
        },
        "avg_cost": {
          "name": "avg_cost",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "mark_price": {
          "name": "mark_price",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "unrealized_pnl": {
          "name": "unrealized_pnl",
          "type": "numeric(18, 4)",
          "primaryKey": false,
          "notNull": false
        },
        "leverage": {
          "name": "leverage",
          "type": "numeric(6, 3)",
          "primaryKey": false,
          "notNull": false
        },
        "confidence": {
          "name": "confidence",
          "type": "numeric(6, 3)",
          "primaryKey": false,
          "notNull": false
        },
        "risk_usd": {
          "name": "risk_usd",
          "type": "numeric(18, 4)",
          "primaryKey": false,
          "notNull": false
        },
        "exit_plan": {
          "name": "exit_plan",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_positions_portfolio_symbol": {
          "name": "idx_positions_portfolio_symbol",
          "columns": [
            {
              "expression": "portfolio_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "symbol",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "portfolio_positions_portfolio_id_auto_portfolios_id_fk": {
          "name": "portfolio_positions_portfolio_id_auto_portfolios_id_fk",
          "tableFrom": "portfolio_positions",
          "tableTo": "auto_portfolios",
          "columnsFrom": [
            "portfolio_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.portfolio_snapshots": {
      "name": "portfolio_snapshots",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "portfolio_id": {
          "name": "portfolio_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "equity": {
          "name": "equity",
          "type": "numeric(18, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "cash": {
          "name": "cash",
          "type": "numeric(18, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "positions_value": {
          "name": "positions_value",
          "type": "numeric(18, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "realized_pnl": {
          "name": "realized_pnl",
          "type": "numeric(18, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_portfolio_snapshots_portfolio_created": {
          "name": "idx_portfolio_snapshots_portfolio_created",
          "columns": [
            {
              "expression": "portfolio_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "\"created_at\" desc",
              "asc": true,
              "isExpression": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "portfolio_snapshots_portfolio_id_auto_portfolios_id_fk": {
          "name": "portfolio_snapshots_portfolio_id_auto_portfolios_id_fk",
          "tableFrom": "portfolio_snapshots",
          "tableTo": "auto_portfolios",
          "columnsFrom": [
            "portfolio_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.sessions": {
      "name": "sessions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "ip_address": {
          "name": "ip_address",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_sessions_user_id": {
          "name": "idx_sessions_user_id",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_sessions_expires_at": {
          "name": "idx_sessions_expires_at",
          "columns": [
            {
              "expression": "expires_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "sessions_user_id_users_id_fk": {
          "name": "sessions_user_id_users_id_fk",
          "tableFrom": "sessions",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.trade_executions": {
      "name": "trade_executions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "order_id": {
          "name": "order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "fill_price": {
          "name": "fill_price",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "fill_quantity": {
          "name": "fill_quantity",
          "type": "numeric(28, 12)",
          "primaryKey": false,
          "notNull": true
        },
        "fee": {
          "name": "fee",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": false
        },
        "liquidity": {
          "name": "liquidity",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "filled_at": {
          "name": "filled_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_trade_executions_order": {
          "name": "idx_trade_executions_order",
          "columns": [
            {
              "expression": "order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "filled_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "trade_executions_order_id_trade_orders_id_fk": {
          "name": "trade_executions_order_id_trade_orders_id_fk",
          "tableFrom": "trade_executions",
          "tableTo": "trade_orders",
          "columnsFrom": [
            "order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.trade_orders": {
      "name": "trade_orders",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "portfolio_id": {
          "name": "portfolio_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "client_order_id": {
          "name": "client_order_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "venue": {
          "name": "venue",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "symbol": {
          "name": "symbol",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "side": {
          "name": "side",
          "type": "autotrade_order_side",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "order_type": {
          "name": "order_type",
          "type": "autotrade_order_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "quantity": {
          "name": "quantity",
          "type": "numeric(28, 12)",
          "primaryKey": false,
          "notNull": true
        },
        "price": {
          "name": "price",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "autotrade_order_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "confidence": {
          "name": "confidence",
          "type": "numeric(6, 3)",
          "primaryKey": false,
          "notNull": false
        },
        "risk_usd": {
          "name": "risk_usd",
          "type": "numeric(18, 4)",
          "primaryKey": false,
          "notNull": false
        },
        "run_id": {
          "name": "run_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "submitted_at": {
          "name": "submitted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_trade_orders_portfolio_created": {
          "name": "idx_trade_orders_portfolio_created",
          "columns": [
            {
              "expression": "portfolio_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "\"submitted_at\" desc",
              "asc": true,
              "isExpression": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_trade_orders_run": {
          "name": "idx_trade_orders_run",
          "columns": [
            {
              "expression": "run_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "trade_orders_portfolio_id_auto_portfolios_id_fk": {
          "name": "trade_orders_portfolio_id_auto_portfolios_id_fk",
          "tableFrom": "trade_orders",
          "tableTo": "auto_portfolios",
          "columnsFrom": [
            "portfolio_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "trade_orders_client_order_id_unique": {
          "name": "trade_orders_client_order_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "client_order_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.user_identities": {
      "name": "user_identities",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "provider": {
          "name": "provider",
          "type": "provider",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "provider_sub": {
          "name": "provider_sub",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "access_token": {
          "name": "access_token",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "refresh_token": {
          "name": "refresh_token",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "id_token": {
          "name": "id_token",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "raw_profile": {
          "name": "raw_profile",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_user_identities_provider_sub": {
          "name": "idx_user_identities_provider_sub",
          "columns": [
            {
              "expression": "provider",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "provider_sub",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_identities_user_id": {
          "name": "idx_user_identities_user_id",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_identities_user_id_users_id_fk": {
          "name": "user_identities_user_id_users_id_fk",
          "tableFrom": "user_identities",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.users": {
      "name": "users",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "email_verified": {
          "name": "email_verified",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "full_name": {
          "name": "full_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "avatar_url": {
          "name": "avatar_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_login_at": {
          "name": "last_login_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_users_email": {
          "name": "idx_users_email",
          "columns": [
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "users_email_unique": {
          "name": "users_email_unique",
          "nullsNotDistinct": false,
          "columns": [
            "email"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {
    "public.autotrade_event_type": {
      "name": "autotrade_event_type",
      "schema": "public",
      "values": [
        "pause",
        "resume",
        "deposit",
        "withdraw",
        "order_error",
        "risk_override"
      ]
    },
    "public.auto_portfolio_status": {
      "name": "auto_portfolio_status",
      "schema": "public",
      "values": [
        "pending",
        "active",
        "paused",
        "disabled"
      ]
    },
    "public.autotrade_decision_action": {
      "name": "autotrade_decision_action",
      "schema": "public",
      "values": [
        "buy",
        "sell",
        "hold"
      ]
    },
    "public.autotrade_order_side": {
      "name": "autotrade_order_side",
      "schema": "public",
      "values": [
        "buy",
        "sell"
      ]
    },
    "public.autotrade_order_status": {
      "name": "autotrade_order_status",
      "schema": "public",
      "values": [
        "pending",
        "submitted",
        "partially_filled",
        "filled",
        "cancelled",
        "failed"
      ]
    },
    "public.autotrade_order_type": {
      "name": "autotrade_order_type",
      "schema": "public",
      "values": [
        "market",
        "limit",
        "stop_market",
        "stop_limit"
      ]
    },
    "public.autotrade_prompt_payload_type": {
      "name": "autotrade_prompt_payload_type",
      "schema": "public",
      "values": [
        "prompt",
        "cot"
      ]
    },
    "public.provider": {
      "name": "provider",
      "schema": "public",
      "values": [
        "google"
      ]
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}